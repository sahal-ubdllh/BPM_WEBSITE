<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="pages.css">
    <link rel="shortcut icon" href="../assets/logobpm.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <title>Aspirasi ‚Äî BPM FT UNMA</title>
    <style>
        .aspirasi-page { padding: 60px 40px 100px; max-width: 1100px; margin: 0 auto; }

        /* Layout 2 kolom */
        .aspirasi-layout { display: grid; grid-template-columns: 1fr 1.4fr; gap: 48px; align-items: start; }

        /* Info kiri */
        .aspirasi-info { position: sticky; top: 100px; }
        .aspirasi-info .section-label { margin-bottom: 12px; }
        .aspirasi-info h2 { font-family:'Playfair Display',serif; font-size:clamp(24px,3vw,32px); font-weight:700; color:var(--primary); margin-bottom:16px; line-height:1.3; }
        .aspirasi-info p  { font-size:14px; color:#666; line-height:1.85; margin-bottom:24px; }

        .anon-badge {
            display:flex; align-items:flex-start; gap:14px;
            background:rgba(85,0,0,.06); border:1px solid rgba(85,0,0,.12);
            border-radius:16px; padding:20px; margin-bottom:20px;
        }
        .anon-badge .anon-icon { width:42px; height:42px; background:var(--primary); border-radius:12px; display:flex; align-items:center; justify-content:center; color:var(--secondary); font-size:16px; flex-shrink:0; }
        .anon-badge .anon-text h4 { font-size:13.5px; font-weight:600; color:var(--primary); margin-bottom:4px; }
        .anon-badge .anon-text p  { font-size:12.5px; color:#777; line-height:1.6; margin:0; }

        .info-steps { display:flex; flex-direction:column; gap:16px; margin-top:8px; }
        .info-step  { display:flex; align-items:flex-start; gap:14px; }
        .step-num   { width:30px; height:30px; background:var(--primary); color:var(--secondary); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:700; flex-shrink:0; }
        .step-text h5 { font-size:13px; font-weight:600; color:var(--primary); margin-bottom:2px; }
        .step-text p  { font-size:12px; color:#888; line-height:1.5; margin:0; }

        /* Form kanan */
        .aspirasi-form-wrap {
            background:var(--white); border-radius:28px; padding:44px 40px;
            box-shadow:0 8px 48px rgba(85,0,0,.1); border:1px solid rgba(85,0,0,.06);
        }
        .form-header { margin-bottom:32px; }
        .form-header h3 { font-family:'Playfair Display',serif; font-size:22px; font-weight:700; color:var(--primary); margin-bottom:6px; }
        .form-header p  { font-size:13px; color:#888; }

        .form-group { margin-bottom:22px; }
        .form-label { display:block; font-size:12.5px; font-weight:600; color:var(--primary); margin-bottom:8px; letter-spacing:.3px; }
        .form-label span { color:#e55; font-size:11px; }

        .form-input, .form-select, .form-textarea {
            width:100%; padding:13px 16px; border:1.5px solid rgba(85,0,0,.15);
            border-radius:12px; font-family:'Poppins',sans-serif; font-size:13.5px;
            color:var(--font-color); background:var(--bg); transition:all var(--transition); outline:none;
        }
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color:var(--primary); background:var(--white);
            box-shadow:0 0 0 3px rgba(85,0,0,.08);
        }
        .form-input::placeholder, .form-textarea::placeholder { color:#bbb; }
        .form-textarea { resize:vertical; min-height:140px; line-height:1.7; }
        .form-select { cursor:pointer; appearance:none; background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23550000' d='M6 8L1 3h10z'/%3E%3C/svg%3E"); background-repeat:no-repeat; background-position:right 14px center; padding-right:40px; }

        .form-row { display:grid; grid-template-columns:1fr 1fr; gap:16px; }

        /* Rating */
        .rating-group { display:flex; gap:8px; flex-wrap:wrap; }
        .rating-btn {
            padding:8px 16px; border:1.5px solid rgba(85,0,0,.15); border-radius:100px;
            font-family:'Poppins',sans-serif; font-size:12px; font-weight:500; cursor:pointer;
            transition:all var(--transition); background:transparent; color:#666;
        }
        .rating-btn.selected, .rating-btn:hover { background:var(--primary); color:var(--secondary); border-color:var(--primary); }

        /* Char counter */
        .char-counter { text-align:right; font-size:11px; color:#bbb; margin-top:4px; }

        /* Anonimitas toggle */
        .anon-toggle { display:flex; align-items:center; gap:12px; padding:14px 16px; background:rgba(85,0,0,.04); border-radius:12px; border:1.5px solid rgba(85,0,0,.08); cursor:pointer; transition:all var(--transition); }
        .anon-toggle:hover { border-color:rgba(85,0,0,.2); }
        .toggle-switch { position:relative; width:44px; height:24px; flex-shrink:0; }
        .toggle-switch input { opacity:0; width:0; height:0; }
        .toggle-slider { position:absolute; inset:0; background:#ddd; border-radius:100px; transition:all var(--transition); cursor:pointer; }
        .toggle-slider::before { content:''; position:absolute; width:18px; height:18px; left:3px; top:3px; background:#fff; border-radius:50%; transition:all var(--transition); box-shadow:0 2px 4px rgba(0,0,0,.2); }
        .toggle-switch input:checked + .toggle-slider { background:var(--primary); }
        .toggle-switch input:checked + .toggle-slider::before { transform:translateX(20px); }
        .toggle-text h5 { font-size:13px; font-weight:600; color:var(--primary); margin-bottom:2px; }
        .toggle-text p  { font-size:11.5px; color:#888; margin:0; }

        /* Submit button */
        .btn-submit {
            width:100%; padding:15px; background:linear-gradient(135deg,var(--primary-dark),var(--primary));
            color:var(--secondary); border:none; border-radius:14px; font-family:'Poppins',sans-serif;
            font-size:14px; font-weight:600; cursor:pointer; transition:all var(--transition);
            display:flex; align-items:center; justify-content:center; gap:10px; letter-spacing:.3px;
            box-shadow:0 4px 20px rgba(85,0,0,.25); margin-top:8px;
        }
        .btn-submit:hover:not(:disabled) { transform:translateY(-2px); box-shadow:0 8px 32px rgba(85,0,0,.35); }
        .btn-submit:active:not(:disabled) { transform:translateY(0); }
        .btn-submit:disabled { opacity:0.6; cursor:not-allowed; }

        /* Success state */
        .form-success {
            display:none; text-align:center; padding:40px 20px;
        }
        .form-success .success-icon { width:72px; height:72px; background:linear-gradient(135deg,var(--primary),var(--primary-mid)); border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 auto 20px; color:var(--secondary); font-size:28px; box-shadow:0 8px 24px rgba(85,0,0,.25); animation:scaleIn 0.5s ease; }
        .form-success h3 { font-family:'Playfair Display',serif; font-size:22px; color:var(--primary); margin-bottom:10px; }
        .form-success p  { font-size:13.5px; color:#666; margin-bottom:24px; line-height:1.7; }
        .btn-reset { padding:11px 28px; background:transparent; border:1.5px solid var(--primary); color:var(--primary); border-radius:100px; font-family:'Poppins',sans-serif; font-size:13px; font-weight:600; cursor:pointer; transition:all var(--transition); }
        .btn-reset:hover { background:var(--primary); color:var(--secondary); }

        @keyframes scaleIn {
            from { transform:scale(0); }
            to { transform:scale(1); }
        }

        /* FAQ */
        .faq-section { margin-top:80px; }
        .faq-header  { text-align:center; margin-bottom:40px; }
        .faq-list    { max-width:720px; margin:0 auto; display:flex; flex-direction:column; gap:12px; }
        .faq-item    { background:var(--white); border-radius:14px; border:1px solid rgba(85,0,0,.08); overflow:hidden; box-shadow:0 2px 12px rgba(85,0,0,.05); }
        .faq-q {
            padding:18px 24px; display:flex; justify-content:space-between; align-items:center;
            cursor:pointer; font-size:14px; font-weight:600; color:var(--primary);
            transition:background var(--transition);
        }
        .faq-q:hover { background:rgba(85,0,0,.03); }
        .faq-q i     { font-size:12px; color:rgba(85,0,0,.4); transition:transform var(--transition); flex-shrink:0; }
        .faq-item.open .faq-q i { transform:rotate(180deg); }
        .faq-a { display:none; padding:0 24px 18px; font-size:13.5px; color:#666; line-height:1.75; }
        .faq-item.open .faq-a { display:block; }

        @media(max-width:900px) {
            .aspirasi-layout { grid-template-columns:1fr; }
            .aspirasi-info   { position:static; }
        }
        @media(max-width:600px) {
            .aspirasi-page     { padding:40px 20px 70px; }
            .aspirasi-form-wrap{ padding:28px 22px; }
            .form-row          { grid-template-columns:1fr; }
        }
    </style>
</head>
<body>

<header id="main-header">
    <nav>
        <div class="logo-container">
            <a href="../index.html" class="logo"><img src="../assets/logobpm.png" alt="Logo BPM"></a>
            <div class="text">
                <h1>BADAN PERWAKILAN MAHASISWA</h1>
                <h2>FAKULTAS TEKNIK UNIVERSITAS MAJALENGKA</h2>
            </div>
        </div>
        <ul class="nav-links">
            <li class="list-nav-links"><a href="../index.html" class="link-item">Beranda</a></li>
            <li class="list-nav-links"><a href="about.html" class="link-item">Tentang Kami</a></li>
            <li class="list-nav-links dropdown">
                <a href="struktur.html" class="dropbtn link-item">Struktur <i class="fa-solid fa-angle-down"></i></a>
                <div class="dropdown-content">
                    <a href="struktur.html#bph" class="list-dropdown"><i class="fas fa-users"></i> Badan Pengurus Harian</a>
                    <a href="struktur.html#legislasi" class="list-dropdown"><i class="fas fa-scale-balanced"></i> Komisi Legislasi</a>
                    <a href="struktur.html#pengawasan" class="list-dropdown"><i class="fas fa-eye"></i> Komisi Pengawasan dan Keuangan</a>
                    <a href="struktur.html#advokasi" class="list-dropdown"><i class="fas fa-handshake"></i> Komisi Advokasi dan Aspirasi</a>
                    <a href="struktur.html#kominfo" class="list-dropdown"><i class="fas fa-tower-broadcast"></i> Komisi Komunikasi dan Informasi</a>
                </div>
            </li>
            <li class="list-nav-links"><a href="aspirasi.html" class="link-item active">Aspirasi</a></li>
            <li class="list-nav-links"><a href="galeri.html" class="link-item">Galeri</a></li>
            <div class="search-container">
                <input type="search" placeholder="Cari..." class="search-box"/>
                <button class="search-button"><i class="fas fa-search"></i></button>
            </div>
        </ul>
        <div class="burger" aria-expanded="false"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div>
    </nav>
</header>

<main>
    <section class="page-hero">
        <span class="page-hero-label">Sampaikan Suaramu</span>
        <h1>Aspirasi Mahasiswa</h1>
        <p>Kami mendengarkan setiap suara mahasiswa untuk perubahan yang lebih baik</p>
    </section>

    <div class="aspirasi-page">
        <div class="aspirasi-layout">

            <!-- Info -->
            <div class="aspirasi-info reveal">
                <span class="section-label">Mengapa Aspirasi?</span>
                <h2>Suaramu Adalah Kekuatan Perubahan</h2>
                <p>BPM FT UNMA hadir sebagai jembatan antara mahasiswa dan pihak fakultas. Setiap aspirasi yang kamu sampaikan akan kami tindaklanjuti dengan serius dan penuh tanggung jawab.</p>

                <div class="anon-badge">
                    <div class="anon-icon"><i class="fas fa-user-secret"></i></div>
                    <div class="anon-text">
                        <h4>100% Anonim & Aman</h4>
                        <p>Identitasmu terlindungi sepenuhnya. Kamu bebas berbicara tanpa khawatir.</p>
                    </div>
                </div>

                <div class="info-steps">
                    <div class="info-step">
                        <div class="step-num">1</div>
                        <div class="step-text">
                            <h5>Isi Formulir</h5>
                            <p>Sampaikan aspirasi, keluhan, atau saran kamu dengan jelas dan detail.</p>
                        </div>
                    </div>
                    <div class="info-step">
                        <div class="step-num">2</div>
                        <div class="step-text">
                            <h5>BPM Menerima</h5>
                            <p>Aspirasi kamu langsung tersimpan di database kami secara real-time.</p>
                        </div>
                    </div>
                    <div class="info-step">
                        <div class="step-num">3</div>
                        <div class="step-text">
                            <h5>Ditindaklanjuti</h5>
                            <p>Kami akan memproses dan menyalurkan aspirasimu kepada pihak yang berwenang.</p>
                        </div>
                    </div>
                    <div class="info-step">
                        <div class="step-num">4</div>
                        <div class="step-text">
                            <h5>Laporan Publik</h5>
                            <p>Hasil tindak lanjut dilaporkan secara transparan kepada seluruh mahasiswa.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Form -->
            <div class="aspirasi-form-wrap reveal">
                <div id="form-container">
                    <div class="form-header">
                        <h3>Formulir Aspirasi</h3>
                        <p>Semua kolom wajib diisi kecuali yang ditandai opsional</p>
                    </div>

                    <form id="aspirasi-form" novalidate>
                        <!-- Kategori -->
                        <div class="form-group">
                            <label class="form-label">Kategori Aspirasi <span>*</span></label>
                            <select class="form-select" id="kategori" required>
                                <option value="" disabled selected>Pilih kategori...</option>
                                <option value="akademik">üìö Akademik & Perkuliahan</option>
                                <option value="fasilitas">üèõÔ∏è Fasilitas & Sarana Prasarana</option>
                                <option value="kemahasiswaan">üéì Kegiatan Kemahasiswaan</option>
                                <option value="keuangan">üí∞ Keuangan & Beasiswa</option>
                                <option value="kebijakan">üìã Kebijakan Fakultas</option>
                                <option value="lainnya">üí¨ Lainnya</option>
                            </select>
                        </div>

                        <!-- Judul & Prodi -->
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Judul Aspirasi <span>*</span></label>
                                <input type="text" class="form-input" id="judul" placeholder="Judul singkat..." required maxlength="80">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Program Studi <span>*</span></label>
                                <select class="form-select" id="prodi" required>
                                    <option value="" disabled selected>Pilih prodi...</option>
                                    <option>Informatika</option>
                                    <option>Teknik Sipil</option>
                                    <option>Teknik Mesin</option>
                                    <option>Teknik Industri</option>
                                </select>
                            </div>
                        </div>

                        <!-- Isi Aspirasi -->
                        <div class="form-group">
                            <label class="form-label">Isi Aspirasi <span>*</span></label>
                            <textarea class="form-textarea" id="isi" placeholder="Ceritakan aspirasimu secara detail. Semakin detail, semakin mudah kami menindaklanjutinya..." required maxlength="1000"></textarea>
                            <div class="char-counter"><span id="char-count">0</span> / 1000 karakter</div>
                        </div>

                        <!-- Tingkat Urgensi -->
                        <div class="form-group">
                            <label class="form-label">Tingkat Urgensi <span>*</span></label>
                            <div class="rating-group" id="urgensi-group">
                                <button type="button" class="rating-btn" data-value="rendah">üü¢ Rendah</button>
                                <button type="button" class="rating-btn" data-value="sedang">üü° Sedang</button>
                                <button type="button" class="rating-btn" data-value="tinggi">üü† Tinggi</button>
                                <button type="button" class="rating-btn" data-value="mendesak">üî¥ Mendesak</button>
                            </div>
                        </div>

                        <!-- Harapan (opsional) -->
                        <div class="form-group">
                            <label class="form-label">Harapan / Solusi yang Diinginkan <span style="color:#aaa;font-weight:400">(opsional)</span></label>
                            <input type="text" class="form-input" id="harapan" placeholder="Apa solusi yang kamu harapkan?">
                        </div>

                        <!-- Anonimitas Toggle -->
                        <div class="form-group">
                            <label class="anon-toggle">
                                <div class="toggle-switch">
                                    <input type="checkbox" id="anon-toggle" checked>
                                    <span class="toggle-slider"></span>
                                </div>
                                <div class="toggle-text">
                                    <h5><i class="fas fa-user-secret"></i> Kirim Secara Anonim</h5>
                                    <p id="toggle-desc">Identitasmu akan disembunyikan sepenuhnya</p>
                                </div>
                            </label>
                        </div>

                        <!-- Nama (muncul kalau non-anon) -->
                        <div class="form-group" id="nama-group" style="display:none">
                            <label class="form-label">Nama (opsional)</label>
                            <input type="text" class="form-input" id="nama" placeholder="Nama kamu...">
                        </div>

                        <button type="submit" class="btn-submit">
                            <i class="fas fa-paper-plane"></i> Kirim Aspirasi
                        </button>
                    </form>
                </div>

                <!-- Success state -->
                <div class="form-success" id="form-success">
                    <div class="success-icon"><i class="fas fa-check"></i></div>
                    <h3>Terima Kasih!</h3>
                    <p>Aspirasi kamu telah berhasil dikirim dan tersimpan di database kami. Tim BPM akan segera menindaklanjutinya.</p>
                    <button class="btn-reset" onclick="resetForm()">
                        <i class="fas fa-plus"></i> Kirim Aspirasi Lain
                    </button>
                </div>
            </div>

        </div>

        <!-- FAQ -->
        <div class="faq-section">
            <div class="faq-header reveal">
                <span class="section-label">Pertanyaan Umum</span>
                <h2 class="section-title">FAQ</h2>
                <div class="section-divider"></div>
            </div>
            <div class="faq-list">
                <div class="faq-item reveal">
                    <div class="faq-q" onclick="toggleFaq(this)">
                        Apakah identitas saya benar-benar aman?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-a">
                        Ya, 100% aman. Jika kamu memilih opsi anonim, kami tidak menyimpan data pribadi apapun. Data tersimpan di database Firebase yang aman dan terenkripsi.
                    </div>
                </div>
                <div class="faq-item reveal">
                    <div class="faq-q" onclick="toggleFaq(this)">
                        Berapa lama aspirasi saya akan ditindaklanjuti?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-a">
                        Kami berkomitmen untuk merespons setiap aspirasi maksimal 3x24 jam. Tindak lanjut konkret bergantung pada tingkat urgensi dan kompleksitas permasalahan.
                    </div>
                </div>
                <div class="faq-item reveal">
                    <div class="faq-q" onclick="toggleFaq(this)">
                        Apakah saya bisa melacak status aspirasi saya?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-a">
                        Saat ini sistem pelacakan masih dalam pengembangan. Update progress aspirasi akan diumumkan secara berkala melalui media sosial BPM FT UNMA.
                    </div>
                </div>
                <div class="faq-item reveal">
                    <div class="faq-q" onclick="toggleFaq(this)">
                        Boleh mengirim lebih dari satu aspirasi?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-a">
                        Tentu saja! Kamu bisa mengirimkan sebanyak apapun aspirasi yang kamu inginkan. Setiap suara mahasiswa sangat berarti bagi kami.
                    </div>
                </div>
            </div>
        </div>

    </div>
</main>

<!-- FOOTER -->
<footer>
    <div class="footer-top">
        <div class="footer-brand">
            <img src="../assets/logobpm.png" alt="Logo BPM" class="footer-logo">
            <div class="footer-brand-text">
                <h3>BPM FT UNMA</h3>
                <p>Badan Perwakilan Mahasiswa<br>Fakultas Teknik Universitas Majalengka</p>
            </div>
        </div>
        <div class="footer-tagline"><span>"Satu Langkah Bersama Mahasiswa"</span></div>
    </div>
    <div class="footer-divider"></div>
    <div class="footer-main">
        <div class="footer-col">
            <h4><i class="fas fa-location-dot"></i> Alamat</h4>
            <p>Gedung Fakultas Teknik<br>Universitas Majalengka<br>Jl. KH. Abdul Halim No. 103,<br>Majalengka, Jawa Barat 45418</p>
            <a href="https://maps.app.goo.gl/YLWzgehLRq5iLAmTA" target="_blank" class="footer-map-link"><i class="fas fa-map"></i> Lihat di Maps</a>
        </div>
        <div class="footer-col">
            <h4><i class="fas fa-sitemap"></i> Navigasi</h4>
            <ul class="footer-nav">
                <li><a href="../index.html"><i class="fas fa-chevron-right"></i> Beranda</a></li>
                <li><a href="about.html"><i class="fas fa-chevron-right"></i> Tentang Kami</a></li>
                <li><a href="struktur.html"><i class="fas fa-chevron-right"></i> Struktur Organisasi</a></li>
                <li><a href="aspirasi.html"><i class="fas fa-chevron-right"></i> Aspirasi</a></li>
                <li><a href="galeri.html"><i class="fas fa-chevron-right"></i> Galeri</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4><i class="fas fa-envelope"></i> Kontak</h4>
            <div class="footer-contact-item"><i class="fas fa-envelope-open-text"></i><span>bpmft20252026@gmail.com</span></div>
            <div class="footer-contact-item"><i class="fas fa-phone"></i><span>+62 838-2469-4692</span></div>
            <h4 style="margin-top:24px"><i class="fas fa-share-nodes"></i> Media Sosial</h4>
            <div class="footer-socials">
                <a href="https://www.instagram.com/bpm_ftunma/" class="social-btn instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" class="social-btn twitter"><i class="fab fa-x-twitter"></i></a>
                <a href="#" class="social-btn facebook"><i class="fab fa-facebook-f"></i></a>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2026 Badan Perwakilan Mahasiswa Fakultas Teknik UNMA. All Rights Reserved.</p>
        <p class="footer-made">Dibuat dengan <i class="fas fa-heart"></i> untuk mahasiswa</p>
    </div>
</footer>

<!-- Firebase SDK -->
<script>
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // GOOGLE SHEETS CONFIG
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    // ‚ö†Ô∏è GANTI URL INI dengan URL dari Langkah 2.4!
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzBS2vVMkXE5hyR8vLddsrJhTAnXIkuUEEyQZ5koa6RWjvrws_TGF2R5z4WuxPBMlAN/exec';
    
    // Function untuk submit ke Google Sheets
    window.submitToGoogleSheets = async function(data) {
        try {
            const response = await fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });
            
            return true;
        } catch (error) {
            console.error('Error:', error);
            throw error;
        }
    };
</script>

<script src="pages.js"></script>
<script>
    // Character counter
    const isiTextarea = document.getElementById('isi');
    const charCount = document.getElementById('char-count');
    
    isiTextarea.addEventListener('input', function() {
        charCount.textContent = this.value.length;
    });

    // Rating selection
    let selectedUrgensi = '';
    document.querySelectorAll('.rating-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('selected'));
            this.classList.add('selected');
            selectedUrgensi = this.dataset.value;
        });
    });

    // Anonymity toggle
    const anonToggle = document.getElementById('anon-toggle');
    const namaGroup = document.getElementById('nama-group');
    const toggleDesc = document.getElementById('toggle-desc');

    anonToggle.addEventListener('change', function() {
        if (this.checked) {
            namaGroup.style.display = 'none';
            toggleDesc.textContent = 'Identitasmu akan disembunyikan sepenuhnya';
        } else {
            namaGroup.style.display = 'block';
            toggleDesc.textContent = 'Nama kamu akan ditampilkan (opsional)';
        }
    });

    // Form submission
    const form = document.getElementById('aspirasi-form');
    const formContainer = document.getElementById('form-container');
    const formSuccess = document.getElementById('form-success');
    const submitBtn = form.querySelector('.btn-submit');

    form.addEventListener('submit', async function(e) {
        e.preventDefault();

        // Validation
        const kategori = document.getElementById('kategori').value;
        const judul = document.getElementById('judul').value.trim();
        const prodi = document.getElementById('prodi').value;
        const isi = document.getElementById('isi').value.trim();

        if (!kategori || !judul || !prodi || !isi || !selectedUrgensi) {
            alert('Mohon lengkapi semua field yang wajib diisi!');
            return;
        }

        // Disable submit button
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Mengirim...';

        // Prepare data
        const data = {
            kategori: kategori,
            judul: judul,
            prodi: prodi,
            isi: isi,
            urgensi: selectedUrgensi,
            harapan: document.getElementById('harapan').value.trim() || '',
            anonim: anonToggle.checked,
            nama: anonToggle.checked ? 'Anonim' : (document.getElementById('nama').value.trim() || 'Anonim')
        };

        try {
            // Submit to Firebase
            await window.submitToGoogleSheets(data);

            // Show success
            formContainer.style.display = 'none';
            formSuccess.style.display = 'block';
        } catch (error) {
            alert('Terjadi kesalahan saat mengirim aspirasi. Silakan coba lagi.');
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Kirim Aspirasi';
        }
    });

    // Reset form
    window.resetForm = function() {
        form.reset();
        formContainer.style.display = 'block';
        formSuccess.style.display = 'none';
        selectedUrgensi = '';
        document.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('selected'));
        charCount.textContent = '0';
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Kirim Aspirasi';
    };

    // FAQ toggle
    window.toggleFaq = function(element) {
        const faqItem = element.parentElement;
        faqItem.classList.toggle('open');
    };
</script>
</body>
</html>